
# CSS & Sass ガイドライン

バージョン：0.1  
最終更新日：2014/02/01


## CSS ＆ Sass 共通ガイドライン

### 概要
CSS・Sassの品質を保つため、CSS, Sass 定義時のルールを設ける。  
この章ではCSSとSassで共通となるルールを定義。  

CSS・Sassそれぞれのルールに関しては、  
別章「CSSガイドライン」「Sassガイドライン」にて解説。


### 優先順位の設定

CSS・Sassは下記の項目から優先順位をつけて設計。  
新規スタイルの際に迷ったり、既存コードについて疑問に思った際は、設定した優先順位を確認。

> 0. 更新時に、スタイルのコンフリクトによる事故を起こさないこと
> 0. ファイルサイズが軽量であること
> 0. 制作時にclass名で悩まないこと
> 0. スタイルの拡張・修正がしやすいこと
> 0. 複数人で同時作業が可能なこと
> 0. 誰でも更新できること（制作者のSass・CSSの理解度に依存しない）


### Sass導入

Sassを使ってCSSコーディングの効率化。  
Sass環境を構築していない場合は、スタイル編集・制作を原則禁止。  
絶対にCSSファイルを直接編集しない。


### 文字コード
CSS・Sassともに、**UTF-8** を採用。
各CSSファイルの先頭で文字コード宣言を行う。
<pre>
@charset "UTF-8";
</pre>


### 改行コード
CSS・Sassともに、CR+LF


### インデント

#### CSS  
開発時は、半角スペース二つ  
本番配信用ファイルでは、圧縮するためインデントなし

#### Sass  
タブ（半角4つ分）

<pre>
Sassのコンパイル設定によって、出力されるCSSファイル内のインデントは変わります。  
　  
Sassのデフォルト設定では、  
コンパイル設定をexpandedやnested形式にした場合、  
半角2つでインデントがとられます。  
　  
Sassファイル内では、インデントをタブ（半角4つ分）でとっていますが、  
出力されるCSSは、上記デフォルト設定に任せています。  
　  
同一プロジェクト内において、  
インデント形式の異なるドキュメントファイルが存在するという事実は、  
誠に遺憾ではありますが、以下の理由により許容しています。  
　  
1. 最終的にcompressedするためインデントはなくなる  
2. このプロジェクトではCSSファイルを直接編集することはない  
　  
　  
尚、どうしても我慢ならぬ場合は、  
下記を参考にコンパイルされるCSSファイルのインデント形式を変更してください。  
http://www.skyward-design.net/blog/archives/000121.html

</pre>


### フォント
#### 概要
このサイトではフォントサイズをpx指定しています。  
デフォルトフォントは14pxを基準 (bodyにfont-size: 14pxを指定) としています。  
文字サイズはpx固定ですが、文字数が増えたり、文字サイズが大きくなったりしても、  
文字がコンテンツ領域に収まるように考慮して、マークアップをしてください。  

#### font-family
<pre>
fontFamily : "メイリオ",Meiryo,"ＭＳ Ｐゴシック","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",sans-serif;
</pre>




### IDセレクタへのスタイル指定禁止
IDセレクタへのスタイルはつけない。  
スタイルはclass に対して指定すること。  

#### 理由  
> * IDセレクタに付加したスタイルは再利用ができないため  
> * マルチクラスによる、オーバーライドがしにくくなるため  
> * オーバーライドするために、セレクタを増やすことになるため、結果ファイルサイズが増加する  


### js- プレフィックスを付けたクラスへのスタイル指定禁止
JS用のプレフィックスクラスである js- に対してはスタイルは付加しない。


### h1,h2,h3,h4,h5,h6・・・タグへのスタイル指定禁止
h1,h2,h3等の見出しタグへの、共通CSSでスタイル付けをおこなわない。  
スタイルを付加したい場合は、別途スタイル用のクラス（例、class="m-tit"）を割り当ててください。


#### 理由
> h1 や h2 にスタイルを直接付加してしまうと、スタイルに左右されてしまい、決まったエリアにしかh1,h2が使えなくなります。  
> サイトの構成上用途に応じた適切な箇所にタグ付けするために、h1 や h2 にスタイルを直接付加しません。


### プロパティの値が0の場合は単位を省略する

プロパティの値として 0 を指定する場合は、単位表示を省略する

<pre>
/* 採用 */
margin: 0;

/* 非採用 */
margin: 0px;
</pre>


### ゼロ以下の値を記述する場合は、0を含める

ゼロ以下の値（0.x）を指定する場合、見通しを考慮して、0は明記する。  
一瞬間違っているかと思うため。

<pre>
/* 採用 */
font-size: 0.9em;

/* 非採用 */
font-size: .9em;
</pre>


### 色定義

色定義は、16進数で定義し、6桁で記述する。  
表記統一のため。

<pre>
/* 採用 */
color: #ff0000;

/* 非採用 */
color: #f00;
color: red;
</pre>


### CSS内の url() 指定に関して
url() ではシングルクォーテーションを使用。  
クォーテーションなしや、ダブルクォーテーションは利用しない。  
CompassのHelper関数利用時も同様。  

理由は、表記統一のため（Compassのデフォルト出力がシングルクォーテーション）。

＜採用＞
<pre>
/* 採用 */
background-image: url('../img/test.png');
// CompassのHelper関数利用時
background-image: image-url('../img/test.png');

/* 非採用 */
background-image: url(../img/test.png);
background-image: url("../img/test.png");
</pre>


### コメントルール

開発中のコードの見通しをよくするために、各セクションに対して適宜コメントを記述。  
最終的にcssをminify化する際にコメントを削除。


#### 目次
<pre>
/**
 * PROJECT NAME
 * @require 必要な環境、フレームワーク類があれば記述
 * @version x.x.x
 * @update xxxx/xx/xx
 */
</pre>

#### 大見出し
<pre>
/*----------------------------------------

 大見出し

----------------------------------------*/
</pre>


#### 中見出し
<pre>
/*----------------------------------------
 中見出し
----------------------------------------*/
</pre>


#### 小見出し
<pre>
/* 小見出し */
</pre>



### !important の使用について
ヘルパークラスに使うのは可。  
場当たり的な問題解決として利用するのは禁止。

<pre>
/* 非採用 */
.error{ color: red !important; }
</pre>


### セレクタとプロパティの記述ルール

Sassを使っているため、開発環境では自動的に下記の形式でCSSが出力されます。  
本番配信時は、CSSファイルが圧縮されるため上記のルールには当てはまらなくなりますが問題ありません。

スタイルを記述する際は、下記の点に注意すること。

> * セレクタの直後には半角スペースを記述
> * プロパティの前にはタブ1つでインデント
> * 指定が複数になる場合は基本1行に1プロパティ
> * 指定が少ない場合は1行で記述してもよい
> * セミコロンは省略せず必ず付ける

#### 複数行の場合

<pre>
.selector {
  property1: value1;
  property2: value2;
}
</pre>

#### 1行の場合
<pre>.selector { property3: value3; }</pre>


### DOMの構成と一致するようにルールセットのインデント

DOMの構成と一致するようにCSS側もルールセットをインデントすると、  
親子関係が把握できてコードの見通しが良くなるため、  
開発時には、こちらのルールを推奨（強制はしない）。

#### HTML
<pre>
<div class="m-header">
  <p class="header-link"></p>
</div>
</pre>

#### CSS
<pre>
.m-header {
    property: value;
}
    .header-link {
        property: value;
    }
</pre>




## CSSガイドライン

### 概要

CSSの品質を保つため、CSS定義時のルールを設ける。  
基本的にこちらのルールを遵守。

このCSSガイドラインは、「SassからコンパイルされたCSSファイルが、どういう状態にあるべきか」 を定義する。  


### CSSファイルの外部ファイル化
CSSファイルは外部ファイル化すること  

<pre>
<link rel="stylesheet" href="xxx.css" media="all">
</pre>


### HTML内、インラインスタイルの禁止
htmlファイルのhead要素内での指定は不可。  

<pre>
&lt;html lang="ja"&gt;
&lt;head&gt;
<meta charset="utf-8">
<title>head内でのスタイル指定は禁止</title>
<style>
.ban{ display: none; }
</style>
&lt;/head&gt;
</pre>


htmlファイルに、インラインでのstyle属性での指定も不可

<pre>
<p style="display: block;">インラインでのスタイル指定禁止</p>
</pre>


### 全体構成

1ファイルにまとめて記述する方式を採用。  
ページ毎のスタイルファイルは持たない。  
スタイルシートの大まかな構成は下記の通り。

> 1. リセットCSS
> 2. サイト独自の初期設定
> 3. サイト独自の汎用（ヘルパー）クラス
> 4. 大枠レイアウト情報
> 5. 個別モジュール


### リセットCSS

リセットCSSは、XXXXXX を使用しています。  
リセットCSSではリセットしきれないスタイルや、サイト制作時に役立つ汎用クラス等は  
リセットCSSのあとに追記しています。

<pre>
/* 採用したリセットCSSを記述 */
</pre>


### サイト独自の初期設定

リセットCSSの適用後に、サイト独自の初期設定を加えています。

* 基準フォントの指定
* スクロールバー色の指定
* リンクの指定
* clearfix
* body設定


<pre>
/* 採用したリセットCSSを記述 */
</pre>


### サイト独自の汎用(ヘルパー)クラス

よく使うシングルプロパティを個別のクラスとして用意しています。  
多様は禁物ですが、例外・緊急な対応が入った際に利用してください。

<pre>
/* 採用したリセットCSSを記述 */
</pre>



## Sass ガイドライン

### 概要
本サイトの制作手法として、Sassを使ってCSSコーディングの効率化を図っている。  
まず、Sassを使用可能な環境を構築した後、  
Scssファイルを編集・コンパイルすることでCSSファイルを生成すること。


### @import をする際のルール

パーシャルファイルの読み込み指定は、拡張子や接頭辞の_（アンダースコア）を略した表記も可能ではあるが、  
時間を置いてファイルを見直した際や、第三者への引継ぎの際に、直感的にimport先を理解することができないため、  
必ずアンダースコアや拡張子を省略しないで記述すること。

<pre>
@import "_xxx.scss";
@import "_yyy.scss";
</pre>

下記の形でも読み込めます。
<pre>
@import "_xxx";
@import "yyy";
</pre>

また、@importが複数ある場合、1行で書くこともできますが読みづらいのでしていません。
<pre>
@import "_xxx.scss", "_yyy.scss";
</pre>


### ネストの深さ
基本3レベルまで

＜理由＞
> ネストが深くなると、汎用性がなくなるため  
> また、ファイルサイズが増加するため  

＜参考サイト＞
> [Nestが深い - ぼくのかんがえたさいきょうのしーえしゅえしゅ](http://t32k.me/mol/log/the-perfect-css-i-thought/)


### Mixin ファイルの構造

#### 基本構造
セレクタごと出力するようなmixinでは、意図せず重複したセレクタが出力されないように、  
下記の構造で mixin 化する。

<pre>
$m-XXXX: false !default;
@mixin m-XXXX() {
  @if $m-XXXX {}
  @else {
    $m-XXXX: true;
    .m-XXXX {
    }
  }
}
</pre>

#### 理由
>セレクタごと（.m-XXXX{}のように）出力するような、mixin を作る場合、  
>sassファイルの各場所で、そのmixin が @includeで呼び出された際に、  
>@include　された数だけ、そのクラスが出力されてしまうことになります。  
>  
>コンパイル後のCSSファイル内に、重複したセレクタが増え、  
>ファイル容量やパフォーマンスの面でも好ましくありません。  
>  
>そこで、意図せず、@include を複数された場合でも、  
>セレクタが重複して出力されないように、  
>すでに一度　mixinが　@include　されている場合は、  
>2度目以降は　@include　されても中身を出力しないようにするmixin構造を採用しています。

＜参考サイト＞
> [参考URL - Sass で Singleton を実現し、安心してクラスを再利用する](http://nodot.jp/articles/singletoninsass.html)
> [参考URL - Sass 3.2 からは placeholder selector を使おう](http://nodot.jp/articles/placeholderselector.html)


### モジュール記述ルール

モジュールを作成する際は、下記の命名規則で作成する

* モジュールはm-はじまり
* 単語の区切りはハイフン
* モジュールの子要素は、モジュール名からm-をのぞいたものを引継ぐ

<pre>
.m-hoge{
    .hoge\_\_item{
    }
    .hoge\_\_txt{
    }
}
</pre>


### モジュールの子要素のクラス名

モジュールの子要素に付けるクラス名はわかりやすいものにする。  
もし、クラス名指定に迷ったら下記のクラス名を積極的に利用する。  

<pre>
hoge\_\_body
hoge\_\_area
hoge\_\_item
hoge\_\_thumb
hoge\_\_img
hoge\_\_title
hoge\_\_txt
hoge\_\_num
hoge\_\_lnk
</pre>




### 参考文献

> ＜CSS-Guidelines＞  
> https://github.com/kiwanami/CSS-Guidelines/blob/master/README.ja.md
> 
> ＜ぼくのかんがえたさいきょうのしーえしゅえしゅ － MOL＞  
> https://github.com/kiwanami/CSS-Guidelines/blob/master/README.ja.md
> 
> ＜メンテナブルCSS | 株式会社サイバーエージェント＞  
> http://www.cyberagent.co.jp/recruit/techreport/report/id=7926
> 
> ＜「Google HTML/CSS Style Guide」を適当に和訳してみた＞  
> http://re-dzine.net/2012/05/google-htmlcss-style-guide/
> 

### 参考ツール
CSS記述の際に参考になるサイト。

> ＜W3c - CSS Validation Service＞  
> http://jigsaw.w3.org/css-validator/
> 
> ＜Can I use...＞  
> http://caniuse.com/
> 

